{% extends 'base.html' %}

{% block content %}
<div><a href="/">back to dashboard</a></div>
<h1>Changes for {{ page.name }}</h1>
<p>{{ page.url }}</p>
<div>Latest tracked changes&nbsp;<span class="smallred">x new alerts since last visit</span></div>
<br>
<table class="table table-striped" width="95%">
  <thead>
    <tr>
      <th>Tracked Element</th>
      <th>Change Detected</th>
      <th>Change</th>
    </tr>
    <tbody>
      {% for version in versions %}
      <tr>
        <td rowspan={{ version.diff|length }}>{{ version.element.name }}</td>
        <td rowspan={{ version.diff|length }}>{{ version.when }}</td>
        <td>{{ version.diff[0] }}</td>
      </tr>
      {% for diff in version.diff %}
      {% if loop.index0 %}
      <tr>
        <td>{{ diff }}</td>
      </tr>
      {% endif %}
      {% endfor %}
      {% endfor %}
    </tbody>
</table>
</div>
</body>
</html>

{% endblock %}
